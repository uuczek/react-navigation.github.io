<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Redux integration · React Navigation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="**Warning: in the next major version of React Navigation, to be released in Fall 2018, we will no longer provide any information about how to integrate with Redux and it may cease to work**. Issues related to Redux that are posted on the React Navigation issue tracker will be immediately closed. Redux integration may continue to work but it will not be tested against or considered when making any design decisions for the library."/><meta name="docsearch:version" content="3.x"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Redux integration · React Navigation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://reactnavigation.org/index.html"/><meta property="og:description" content="**Warning: in the next major version of React Navigation, to be released in Fall 2018, we will no longer provide any information about how to integrate with Redux and it may cease to work**. Issues related to Redux that are posted on the React Navigation issue tracker will be immediately closed. Redux integration may continue to work but it will not be tested against or considered when making any design decisions for the library."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css"/><link rel="alternate" type="application/atom+xml" href="https://reactnavigation.org/blog/atom.xml" title="React Navigation Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://reactnavigation.org/blog/feed.xml" title="React Navigation Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/spiro_white.svg" alt="React Navigation"/><h2 class="headerTitleWithLogo">React Navigation</h2></a><a href="/en/versions.html"><h3>3.x</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/getting-started.html" target="_self">Docs</a></li><li class=""><a href="/docs/en/api-reference.html" target="_self">API</a></li><li class=""><a href="/en/help.html" target="_self">Help</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/zh-Hans/redux-integration.html">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/react-navigation/react-navigation.github.io/edit/source/docs/redux-integration.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Redux integration</h1></header><article><div><span><p><strong>Warning: in the next major version of React Navigation, to be released in Fall 2018, we will no longer provide any information about how to integrate with Redux and it may cease to work</strong>. Issues related to Redux that are posted on the React Navigation issue tracker will be immediately closed. Redux integration may continue to work but it will not be tested against or considered when making any design decisions for the library.</p>
<p>Some folks like to have their navigation state stored in the same place as the rest of their application state. <em>Think twice before you consider doing this, there is an incredibly good chance that you do not need to do this!</em>. Storing your React Navigation state in your own Redux store is likely to give you a very difficult time if you don't know what you're doing.</p>
<p>If your only reason for doing this is that you want to be able to perform navigation actions from outside of your components (eg: from a Redux middleware), you can learn more about this in <a href="navigating-without-navigation-prop.html">navigating without the navigation prop</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<ol>
<li><p>To handle your app's navigation state in Redux, you can pass your own <a href="navigation-prop.html"><code>navigation</code></a> prop to a navigator. <code>react-navigation-redux-helpers</code> handles this for you behind the scenes with a &quot;higher-order component&quot; called <code>reduxifyNavigator</code>. You pass in your root navigator component to the <code>reduxifyNavigator</code> function, and it returns a new component that takes your navigation <code>state</code> and <code>dispatch</code> function as props.</p></li>
<li><p>A middleware is needed so that any events that mutate the navigation state properly trigger React Navigation's event listeners.</p></li>
<li><p>The navigation state inside Redux will need to be kept updated using React Navigation's navigation reducer. You will call this reducer from your Redux master reducer.</p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="step-by-step-guide"></a><a href="#step-by-step-guide" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step-by-step guide</h2>
<p>The following steps apply to <code>react-navigation@^2.3.0</code> and <code>react-navigation-redux-helpers@^2.0.0-beta</code>.</p>
<p>First, you need to add the <code>react-navigation-redux-helpers</code> package to your project.</p>
<pre><code class="hljs css language-bash">yarn add react-navigation-redux-helpers
</code></pre>
<p>or</p>
<pre><code class="hljs css language-bash">npm install --save react-navigation-redux-helpers
</code></pre>
<p>The following is a minimal example of how you might use navigators within a Redux application:</p>
<pre><code class="hljs css language-es6"><span class="hljs-keyword">import</span> {
  createStackNavigator,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-navigation'</span>;
<span class="hljs-keyword">import</span> {
  createStore,
  applyMiddleware,
  combineReducers,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;
<span class="hljs-keyword">import</span> {
  reduxifyNavigator,
  createReactNavigationReduxMiddleware,
  createNavigationReducer,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-navigation-redux-helpers'</span>;
<span class="hljs-keyword">import</span> { Provider, connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> AppNavigator = createStackNavigator(AppRouteConfigs);

<span class="hljs-keyword">const</span> navReducer = createNavigationReducer(AppNavigator);
<span class="hljs-keyword">const</span> appReducer = combineReducers({
  <span class="hljs-attr">nav</span>: navReducer,
  ...
});

<span class="hljs-comment">// Note: createReactNavigationReduxMiddleware must be run before reduxifyNavigator</span>
<span class="hljs-keyword">const</span> middleware = createReactNavigationReduxMiddleware(
  <span class="hljs-string">"root"</span>,
  state =&gt; state.nav,
);

<span class="hljs-keyword">const</span> App = reduxifyNavigator(AppNavigator, <span class="hljs-string">"root"</span>);
<span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({
  <span class="hljs-attr">state</span>: state.nav,
});
<span class="hljs-keyword">const</span> AppWithNavigationState = connect(mapStateToProps)(App);

<span class="hljs-keyword">const</span> store = createStore(
  appReducer,
  applyMiddleware(middleware),
);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Root</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">AppWithNavigationState</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>
    );
  }
}
</code></pre>
<p>Once you do this, your navigation state is stored within your Redux store, at which point you can fire navigation actions using your Redux dispatch function.</p>
<p>Keep in mind that when a navigator is given a <code>navigation</code> prop, it relinquishes control of its internal state. That means you are now responsible for persisting its state, handling any deep linking, <a href="#handling-the-hardware-back-button-in-android">Handling the Hardware Back Button in Android</a>, etc.</p>
<p>Navigation state is automatically passed down from one navigator to another when you nest them. Note that in order for a child navigator to receive the state from a parent navigator, it should be defined as a <code>screen</code>.</p>
<p>Applying this to the example above, you could instead define <code>AppNavigator</code> to contain a nested <code>TabNavigator</code> as follows:</p>
<pre><code class="hljs css language-es6"><span class="hljs-attribute">const AppNavigator</span> = createStackNavigator({
  Home: { screen: MyTabNavigator },
});
</code></pre>
<p>In this case, once you <code>connect</code> <code>AppNavigator</code> to Redux as is done in <code>AppWithNavigationState</code>, <code>MyTabNavigator</code> will automatically have access to navigation state as a <code>navigation</code> prop.</p>
<h2><a class="anchor" aria-hidden="true" id="full-example"></a><a href="#full-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Full example</h2>
<p>There's a working example app with Redux <a href="https://github.com/react-community/react-navigation/tree/master/examples/ReduxExample">here</a> if you want to try it out yourself.</p>
<h2><a class="anchor" aria-hidden="true" id="mocking-tests"></a><a href="#mocking-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mocking tests</h2>
<p>To make jest tests work with your React Navigation app, you need to change the jest preset in the <code>package.json</code>, see <a href="https://facebook.github.io/jest/docs/tutorial-react-native.html#transformignorepatterns-customization">here</a>:</p>
<pre><code class="hljs css language-json">"jest": {
  "preset": "react-native",
  "transformIgnorePatterns": [
    "node_modules/(?!(jest-)?react-native|react-navigation|react-navigation-redux-helpers)"
  ]
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="under-the-hood"></a><a href="#under-the-hood" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Under the hood</h2>
<h3><a class="anchor" aria-hidden="true" id="creating-your-own-navigation-reducer"></a><a href="#creating-your-own-navigation-reducer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating your own navigation reducer</h3>
<p>If you want to replace <code>createNavigationReducer</code> reducer creator this is how you would do it yourself:</p>
<pre><code class="hljs css language-es6">const AppNavigator = createStackNavigator(AppRouteConfigs);

const initialState = AppNavigator.router.getStateForAction(AppNavigator.router.getActionForPathAndParams('Login'));

const navReducer = (<span class="hljs-keyword">state</span> = initialState, action) =&gt; {
  const nextState = AppNavigator.router.getStateForAction(action, <span class="hljs-keyword">state</span>);

  // Simply return the original `<span class="hljs-keyword">state</span>` if `nextState` is null or undefined.
  return nextState || <span class="hljs-keyword">state</span>;
};
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="handling-the-hardware-back-button-in-android"></a><a href="#handling-the-hardware-back-button-in-android" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handling the Hardware Back Button in Android</h2>
<p>By using the following snippet, your nav component will be aware of the back button press actions and will correctly interact with your stack. This is really useful on Android.</p>
<pre><code class="hljs css language-es6"><span class="hljs-keyword">import</span> <span class="hljs-type">React</span> from <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-type">BackHandler</span> } from <span class="hljs-string">"react-native"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-type">NavigationActions</span> } from <span class="hljs-string">"react-navigation"</span>;

<span class="hljs-comment">/* your other setup code here! this is not a runnable snippet */</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReduxNavigation</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  componentDidMount() {
    <span class="hljs-type">BackHandler</span>.addEventListener(<span class="hljs-string">"hardwareBackPress"</span>, <span class="hljs-keyword">this</span>.onBackPress);
  }

  componentWillUnmount() {
    <span class="hljs-type">BackHandler</span>.removeEventListener(<span class="hljs-string">"hardwareBackPress"</span>, <span class="hljs-keyword">this</span>.onBackPress);
  }

  onBackPress = () =&gt; {
    const { dispatch, nav } = <span class="hljs-keyword">this</span>.props;
    <span class="hljs-keyword">if</span> (nav.index === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    dispatch(<span class="hljs-type">NavigationActions</span>.back());
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  };

  render() {
    <span class="hljs-comment">/* more setup code here! this is not a runnable snippet */</span> 
    <span class="hljs-keyword">return</span> &lt;<span class="hljs-type">AppNavigator</span> navigation={navigation} /&gt;;
  }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a></li><li><a href="#step-by-step-guide">Step-by-step guide</a></li><li><a href="#full-example">Full example</a></li><li><a href="#mocking-tests">Mocking tests</a></li><li><a href="#under-the-hood">Under the hood</a><ul class="toc-headings"><li><a href="#creating-your-own-navigation-reducer">Creating your own navigation reducer</a></li></ul></li><li><a href="#handling-the-hardware-back-button-in-android">Handling the Hardware Back Button in Android</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/spiro_white.svg" alt="React Navigation" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/getting-started.html">Getting Started</a><a href="/docs/en/api-reference.html">API Reference</a><a href="/docs/en/custom-navigator-overview.html">Building your own Navigator</a><a href="/docs/en/contributing.html">Contributing</a></div><div><h5>Support</h5><a href="https://discord.gg/4xEK3nD">Chat in our Discord channel</a><a href="https://react-navigation.canny.io/feature-requests">Request a feature on Canny</a><a href="https://github.com/react-navigation/react-navigation/issues">Report a bug on Github</a><a href="https://stackoverflow.com/questions/tagged/react-navigation" target="_blank">Get help on Stack Overflow</a></div><div><h5>More</h5><a href="https://github.com/react-navigation/react-navigation">GitHub</a><a class="github-button" href="https://github.com/react-navigation/react-navigation" data-icon="octicon-star" data-count-href="/react-community/react-navigation/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: 'c967b4a1491b9cb486d3dca087b771e6',
                indexName: 'reactnavigation',
                inputSelector: '#search_input_react'
              });
            </script></body></html>